{
    "ClientConfiguration": {
        "OfflineMode": false,
        "ForegroundService": false,
        "OnKeyboardMain": false,
        "StopForegroundServiceOnExit": false,
        "GetTaskRequest": "",
        "BroadcastIntent": "",
        "BroadcastVariable": "",
        "PyOnStartConfiguration": "",
        "PyTimerConfiguration": "",
        "PyOnShareConfiguration": "",
        "PyReplyConfiguration": "",
        "PyServiceConfiguration": "",
        "OnlineServiceConfiguration": "",
        "PyCommonConfiguration": "",
        "FaceRecognitionURL": "",
        "NoSQLDBName": "",
        "ConfigurationName": "ЕГАИС3",
        "ConfigurationDescription": "Алкоголь, опт / отгрузка / приёмка / инвентаризация",
        "ConfigurationTags": "off-line,Py",
        "RunPython": true,
        "ConfigurationVersion": "0.0.45",
        "Launch": "Menu",
        "LaunchProcess": "",
        "LaunchDocument": "",
        "LaunchVar": "",
        "Processes": [
            {
                "type": "Process",
                "ProcessName": "Отгрузка",
                "PlanFactHeader": "План-факт",
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "ЕГАИС3_Отгрузка_ВыборДокумента",
                        "hideToolBarScreen": true,
                        "hideBottomBarScreen": true,
                        "send_when_opened": true,
                        "PythonOnCreate": "77u/",
                        "PythonOnInput": "77u/",
                        "Elements": [
                            {
                                "type": "barcode",
                                "Variable": "barcode",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "width_value": "wrap_content",
                                "height_value": "wrap_content",
                                "type_s": "Штрихкод"
                            },
                            {
                                "type": "LinearLayout",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "Value": "Отсканируйте штрихкод документа (отгрузка)",
                                        "TextSize": "14",
                                        "TextBold": true,
                                        "width": "match_parent",
                                        "height": 20,
                                        "gravity_horizontal": "center",
                                        "weight": "0",
                                        "height_value": 20,
                                        "type_s": "Надпись",
                                        "width_value": "match_parent"
                                    },
                                    {
                                        "type": "TextView",
                                        "Value": "@barcode",
                                        "weight": "0",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "type_s": "Надпись",
                                        "width_value": "wrap_content",
                                        "height_value": "wrap_content"
                                    },
                                    {
                                        "type": "CardsLayout",
                                        "orientation": "vertical",
                                        "height": "match_parent",
                                        "width": "match_parent",
                                        "Value": "@cardsTable",
                                        "type_s": "Список карточек",
                                        "StrokeWidth": "1",
                                        "Padding": "2",
                                        "TextSize": "14",
                                        "weight": "0",
                                        "width_value": "match_parent",
                                        "height_value": "match_parent"
                                    }
                                ],
                                "width_value": "match_parent",
                                "height_value": "wrap_content",
                                "type_s": "Контейнер",
                                "weight": "0"
                            }
                        ],
                        "noScroll": true,
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "CardsClick",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KaW1wb3J0IGpzb24gCgpzID0gU2NhblNlc3Npb24oaGFzaE1hcCwgZGJuYW1lPSJlZ2FpcyIpICMgdHlwZTogaWdub3JlCgpzZWxlY3RlZF9kYXRhOiBkaWN0W3N0ciwgc3RyXSA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoInNlbGVjdGVkX2NhcmRfZGF0YSIpKSAjIHR5cGU6IGlnbm9yZQoKCmlmIHNlbGVjdGVkX2RhdGE6CiAgICBzLnN0YXJ0X2RvYyhzZWxlY3RlZF9kYXRhKQogICAgdG9hc3QoZiJEb2N1bWVudCBzZWxlY3RlZDoge3NlbGVjdGVkX2RhdGEuZ2V0KCdfaWQnLCAnTm8gaWQnKX0iKSAjIHR5cGU6IGlnbm9yZQogICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JXQk9CQ0JjQoTNf0J7RgtCz0YDRg9C30LrQsF/QodC60LDQvdC40YDQvtCy0LDQvdC40LUiKSAjIHR5cGU6IGlnbm9yZQplbHNlOgogICAgdG9hc3QoIk5vIGRvY3VtZW50IHNlbGVjdGVkIikgIyB0eXBlOiBpZ25vcmU=",
                                "postExecute": "",
                                "alias": ""
                            },
                            {
                                "event": "onStart",
                                "action": "runasync",
                                "listener": "",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KaW1wb3J0IHRyYWNlYmFjawoKdHJ5OgogICAgcyA9IFNjYW5TZXNzaW9uKGhhc2hNYXAsIGRibmFtZT0iZWdhaXMiKSAjIHR5cGU6IGlnbm9yZQogICAgIyBjcmVhdGUgc29tZSBtb2NrIGRvY3MgZm9yIFVJIGxpc3QKICAgIG1vY2tfZG9jcyA9IFsKICAgICAgICB7Il9pZCI6ICIxIiwgImJhcmNvZGUiOiAiRE9DMDAxIiwgIm51bWJlciI6ICJBLTAwMSIsICJkYXRlIjogIjIwMjUtMDEtMDIifSwKICAgICAgICB7Il9pZCI6ICIyIiwgImJhcmNvZGUiOiAiRE9DMDAyIiwgIm51bWJlciI6ICJBLTAwMiIsICJkYXRlIjogIjIwMjUtMDEtMDMifSwKICAgICAgICB7Il9pZCAiOiAiMyIsICJiYXJjb2RlIjogIkRPQzAwMyIsICJudW1iZXIiOiAiQS0wMDMiLCAiZGF0ZSI6ICIyMDI1LTAxLTA0In0KICAgIF0KICAgIGNhcmRzX2RhdGEgPSBzLmJ1aWxkX2NhcmRzX2pzb25fZm9yX2RvY3MobW9ja19kb2NzLCBsYXlvdXQ9Il5ET0NfUk9XIikKICAgIGhhc2hNYXAucHV0KCJjYXJkc1RhYmxlIiwgY2FyZHNfZGF0YSApICMgdHlwZTogaWdub3JlCiAgICAjIG9wdGlvbmFsOiB0cnkgdG8gcmVzZW5kIHF1ZXVlZCAobm8gZW5kcG9pbnQgeWV0KTsgd2lsbCBiZSBuby1vcAogICAgIyBzLnJldHJ5X3BlbmRpbmcoZW5kcG9pbnQ9Tm9uZSkKZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgdG9hc3QoIkluaXQgZmFpbGVkOiAiICsgc3RyKGUpKSAjIHR5cGU6IGlnbm9yZQogICAgaGFzaE1hcC5wdXQoImVycm9yIiwgc3RyKGUpICsgdHJhY2ViYWNrLmZvcm1hdF9leGMoKSkgIyB0eXBlOiBpZ25vcmUKICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgIkRCX0VSUk9SX1NDUkVFTiIpICMgdHlwZTogaWdub3JlCg==",
                                "postExecute": "[{\"action\": \"run\", \"type\": \"pythonscript\", \"method\": \"aGFzaE1hcC5wdXQoIlJlZnJlc2hTY3JlZW4iLCAiIik=\"}]",
                                "alias": ""
                            }
                        ]
                    },
                    {
                        "type": "Operation",
                        "Name": "ЕГАИС3_Отгрузка_Сканирование",
                        "hideToolBarScreen": true,
                        "hideBottomBarScreen": true,
                        "send_when_opened": true,
                        "PythonOnCreate": "77u/",
                        "PythonOnInput": "77u/",
                        "Elements": [
                            {
                                "type": "barcode",
                                "Variable": "barcode",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "width_value": "wrap_content",
                                "height_value": "wrap_content",
                                "type_s": "Штрихкод"
                            },
                            {
                                "type": "LinearLayout",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "Button",
                                                "Value": "@scan_nom",
                                                "Variable": "scan_nom_click",
                                                "TextSize": "0",
                                                "TextColor": "#00008B",
                                                "BackgroundColor": "#FFFF00",
                                                "width": "match_parent",
                                                "height": "wrap_content",
                                                "gravity_horizontal": "left",
                                                "weight": "1",
                                                "type_s": "Кнопка",
                                                "Radius": "8",
                                                "height_value": "wrap_content",
                                                "width_value": "match_parent"
                                            },
                                            {
                                                "type": "Button",
                                                "Value": "@scan_plan",
                                                "Variable": "scan_plan_click",
                                                "TextSize": "0",
                                                "TextColor": "#00008B",
                                                "BackgroundColor": "#FFFF00",
                                                "width": "match_parent",
                                                "height": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "weight": "2",
                                                "type_s": "Кнопка",
                                                "Radius": "8",
                                                "height_value": "wrap_content",
                                                "width_value": "match_parent"
                                            },
                                            {
                                                "type": "Button",
                                                "Value": "@scan_fact",
                                                "Variable": "scan_fact_click",
                                                "TextSize": "0",
                                                "TextColor": "#00008B",
                                                "BackgroundColor": "#FFFF00",
                                                "width": "match_parent",
                                                "height": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "weight": "2",
                                                "type_s": "Кнопка",
                                                "Radius": "8",
                                                "height_value": "wrap_content",
                                                "width_value": "match_parent"
                                            }
                                        ],
                                        "type_s": "Контейнер",
                                        "width_value": "match_parent",
                                        "height_value": "wrap_content"
                                    },
                                    {
                                        "type": "TextView",
                                        "Value": "@docName",
                                        "weight": "0",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "width_value": "wrap_content",
                                        "height_value": "wrap_content",
                                        "type_s": "Надпись"
                                    },
                                    {
                                        "type": "TableLayout",
                                        "Value": "@docTable",
                                        "weight": "0",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "width_value": "wrap_content",
                                        "height_value": "wrap_content",
                                        "type_s": "Таблица"
                                    },
                                    {
                                        "type": "Button",
                                        "Value": "[  завершить  ]",
                                        "Variable": "scan_end",
                                        "weight": "0",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "width_value": "wrap_content",
                                        "height_value": "wrap_content",
                                        "type_s": "Кнопка"
                                    }
                                ],
                                "width_value": "match_parent",
                                "height_value": "wrap_content",
                                "type_s": "Контейнер"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "listener": "",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KCnMgPSBTY2FuU2Vzc2lvbihoYXNoTWFwLCBkYm5hbWU9ImVnYWlzIikgIyB0eXBlOiBpZ25vcmUKCmRvYyA9IHMuZ2V0X2FjdGl2ZV9kb2MoKQppZiBkb2M6CiAgICBkb2NfbmFtZSA9IGRvYy5nZXQoImJhcmNvZGUiLCAibm90IG5hbWUiKQoKICAgIGhhc2hNYXAucHV0KCJkb2NOYW1lIiwgZG9jX25hbWUpICMgdHlwZTogaWdub3JlCiAgICBoYXNoTWFwLnB1dCgiZG9jVGFibGUiLCBzLmJ1aWxkX3RhYmxlX2pzb25fZm9yX2l0ZW1zKCJeRE9DX1RBQkxFX1JPVyIpKSAjIHR5cGU6IGlnbm9yZQoKZWxzZToKICAgIHRvYXN0KCJObyBhY3RpdmUgZG9jdW1lbnQgZm91bmQiKSAjIHR5cGU6IGlnbm9yZQogICAgCiAgICAjIFVJCiAgICBoYXNoTWFwLnB1dCgic2Nhbl9ub20iLCAi0J3QvtC8LiIpICMgdHlwZTogaWdub3JlCiAgICBoYXNoTWFwLnB1dCgic2Nhbl9wbGFuIiwgItCf0LvQsNC9IikgIyB0eXBlOiBpZ25vcmUKICAgIGhhc2hNYXAucHV0KCJzY2FuX2ZhY3QiLCAi0KTQsNC60YIiKSAjIHR5cGU6IGlnbm9yZWZyb20gc2Nhbl9pbnRlcmZhY2UgaW1wb3J0IFNjYW5TZXNzaW9uCgpzID0gU2NhblNlc3Npb24oaGFzaE1hcCwgZGJuYW1lPSJlZ2FpcyIpICMgdHlwZTogaWdub3JlCgpkb2MgPSBzLmdldF9hY3RpdmVfZG9jKCkKaWYgZG9jOgogICAgZG9jX25hbWUgPSBkb2MuZ2V0KCJiYXJjb2RlIiwgIm5vdCBuYW1lIikKCiAgICBoYXNoTWFwLnB1dCgiZG9jTmFtZSIsIGRvY19uYW1lKSAjIHR5cGU6IGlnbm9yZQogICAgaGFzaE1hcC5wdXQoImRvY1RhYmxlIiwgcy5idWlsZF90YWJsZV9qc29uX2Zvcl9pdGVtcygiXkRPQ19UQUJMRV9ST1ciKSkgIyB0eXBlOiBpZ25vcmUKCmVsc2U6CiAgICB0b2FzdCgiTm8gYWN0aXZlIGRvY3VtZW50IGZvdW5kIikgIyB0eXBlOiBpZ25vcmUKICAgIAogICAgIyBVSQogICAgaGFzaE1hcC5wdXQoInNjYW5fbm9tIiwgItCd0L7QvC4iKSAjIHR5cGU6IGlnbm9yZQogICAgaGFzaE1hcC5wdXQoInNjYW5fcGxhbiIsICLQn9C70LDQvSIpICMgdHlwZTogaWdub3JlCiAgICBoYXNoTWFwLnB1dCgic2Nhbl9mYWN0IiwgItCk0LDQutGCIikgIyB0eXBlOiBpZ25vcmU=",
                                "postExecute": "",
                                "alias": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "barcode",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KCnMgPSBTY2FuU2Vzc2lvbihoYXNoTWFwLCBkYm5hbWU9ImVnYWlzIikgIyB0eXBlOiBpZ25vcmUKY29kZSA9IGhhc2hNYXAuZ2V0KCJiYXJjb2RlIikgIyB0eXBlOiBpZ25vcmUKCmlmIGNvZGU6CiAgICBkb2MgPSBzLmFkZF9zY2FuKGNvZGUpCiAgICBpZiBub3QgZG9jOgogICAgICAgIHMuY3JlYXRlX2RpYWxvZygi0JrQvtC0INGD0LbQtSDQtNC+0LHQsNCy0LvQtdC9IiwgItCj0LTQsNC70LjRgtGMINGB0YLQsNGA0YvQuSDQuCDQtNC+0LHQsNCy0LjRgtGMINC30LDQvdC+0LLQvj8iLCAi0J7RgtC80LXQvdCwIikKICAgICAgICBzLl9zcGVhayhmItCa0L7QtCDRg9C20LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIuIikKICAgICAgICBzLl9iZWVwX2Vycm9yKCkKICAgIGVsc2U6CiAgICAgICAgaGFzaE1hcC5wdXQoImRvY1RhYmxlIiwgcy5idWlsZF90YWJsZV9qc29uX2Zvcl9pdGVtcygiXkRPQ19UQUJMRV9ST1ciKSkgIyB0eXBlOiBpZ25vcmUKICAgICAgICBpZiBpc2luc3RhbmNlKGRvYywgZGljdCk6CiAgICAgICAgICAgIHMuZmlsbF9jdXJyZW50X2RvYyhkb2MpCiAgICAgICAgICAgIAogICAgICAgIGhhc2hNYXAucHV0KCJSZWZyZXNoU2NyZWVuIiwgIiIpICMgdHlwZTogaWdub3JlCmVsc2U6CiAgICBoYXNoTWFwLnB1dCgiZXJyX2Rlc2NyaXB0aW9uIiwgItCa0L7QtCDQvdC1INC90LDQudC00LXQvS4iKSAjIHR5cGU6IGlnbm9yZQogICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JXQk9CQ0JjQoTNf0J7RgtCz0YDRg9C30LrQsF/QodC+0L7QsdGJ0LXQvdC40LXQntCx0J7RiNC40LHQutC1IikgIyB0eXBlOiBpZ25vcmU=",
                                "postExecute": "",
                                "alias": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "scan_end",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KCnMgPSBTY2FuU2Vzc2lvbihoYXNoTWFwLCBwZWxpY2FuX25hbWU9ImVnYWlzIikKZW5kcG9pbnQgPSBoYXNoTWFwLmdldCgiMUNfZW5kcG9pbnQiKSBpZiBoYXNoTWFwLmNvbnRhaW5zS2V5KCIxQ19lbmRwb2ludCIpIGVsc2UgTm9uZQoKc2VudCA9IHMuZmluaXNoKGVuZHBvaW50KQoKaWYgc2VudDoKICAgIHRvYXN0KCLQlNC+0LrRg9C80LXQvdGCINGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvSIpCmVsc2U6CiAgICB0b2FzdCgi0JTQvtC60YPQvNC10L3RgiDRgdC+0YXRgNCw0L3RkdC9INCyINC+0YfQtdGA0LXQtNGMINC+0YLQv9GA0LDQstC60LgiKQoKaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JXQk9CQ0JjQoTNf0J7RgtCz0YDRg9C30LrQsF/QktGL0LHQvtGA0JTQvtC60YPQvNC10L3RgtCwIikK",
                                "postExecute": "",
                                "alias": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "yes",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KdG9hc3QoIlllcyBsaXN0ZW5lciB3YXMgY2FsbGVkIikKcyA9IFNjYW5TZXNzaW9uKGhhc2hNYXAsIGRibmFtZT0iZWdhaXMiKSAjIHR5cGU6IGlnbm9yZQoKY29kZSA9IGhhc2hNYXAuZ2V0KCJiYXJjb2RlIiwgInVua25vd24iKSAjIHR5cGU6IGlnbm9yZQoKIyDQo9C00LDQu9GP0LXQvCDQt9Cw0L/QuNGB0Ywg0LjQtyDRgtC10LrRg9GJ0LXQs9C+INC00L7QutGD0LzQtdC90YLQsApzLnJlbW92ZV9zY2FuKGNvZGUpCgojINCe0LHQvdC+0LLQu9GP0LXQvCDRgtCw0LHQu9C40YbRgyDQtNC+0LrRg9C80LXQvdGC0L7QsgpoYXNoTWFwLnB1dCgiZG9jVGFibGUiLCBzLmJ1aWxkX3RhYmxlX2pzb25fZm9yX2l0ZW1zKCJeRE9DX1RBQkxFX1JPVyIpKSAjIHR5cGU6IGlnbm9yZQpoYXNoTWFwLnB1dCgiUmVmcmVzaFNjcmVlbiIsICIiKSAjIHR5cGU6IGlnbm9yZQ==",
                                "postExecute": "",
                                "alias": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "no",
                                "type": "set",
                                "method": "RefreshScreen",
                                "postExecute": "",
                                "alias": ""
                            }
                        ]
                    },
                    {
                        "type": "Operation",
                        "Name": "ЕГАИС3_Отгрузка_СообщениеОбОшибке",
                        "hideToolBarScreen": true,
                        "noScroll": true,
                        "hideBottomBarScreen": true,
                        "send_when_opened": true,
                        "PythonOnCreate": "77u/",
                        "PythonOnInput": "77u/",
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "Value": "@err_description",
                                        "NoRefresh": true,
                                        "weight": "0",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "width_value": "wrap_content",
                                        "height_value": "wrap_content",
                                        "type_s": "Надпись"
                                    }
                                ],
                                "width_value": "match_parent",
                                "height_value": "match_parent",
                                "type_s": "Контейнер"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "yes",
                                "type": "pythonscript",
                                "method": "ZnJvbSBzY2FuX2ludGVyZmFjZSBpbXBvcnQgU2NhblNlc3Npb24KCnMgPSBTY2FuU2Vzc2lvbihoYXNoTWFwLCBwZWxpY2FuX25hbWU9ImVnYWlzIikKY29kZSA9IGhhc2hNYXAuZ2V0KCJkdXBsaWNhdGVfY29kZSIpCgppZiBjb2RlOgogICAgcy5yZW1vdmVfc2Nhbihjb2RlKQogICAgcy5hZGRfc2Nhbihjb2RlKQoKaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JXQk9CQ0JjQoTNf0J7RgtCz0YDRg9C30LrQsF/QodC60LDQvdC40YDQvtCy0LDQvdC40LUiKQo=",
                                "postExecute": "",
                                "alias": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "listener": "no",
                                "type": "pythonscript",
                                "method": "IyDQv9GA0L7RgdGC0L4g0LLQvtC30LLRgNCw0YnQsNC10LzRgdGPINC6INGB0LrQsNC90LjRgNC+0LLQsNC90LjRjgpoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQldCT0JDQmNChM1/QntGC0LPRgNGD0LfQutCwX9Ch0LrQsNC90LjRgNC+0LLQsNC90LjQtSIpCg==",
                                "postExecute": "",
                                "alias": ""
                            }
                        ]
                    },
                    {
                        "type": "Operation",
                        "Name": "DB_ERROR_SCREEN",
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "Value": "@error_info",
                                        "type_s": "Надпись",
                                        "weight": "0",
                                        "width_value": "match_parent",
                                        "height_value": "wrap_content"
                                    }
                                ],
                                "height_value": "match_parent",
                                "width_value": "match_parent",
                                "type_s": "Контейнер",
                                "weight": "0"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "listener": "",
                                "type": "pythonscript",
                                "method": "aGFzaE1hcC5wdXQoImVycm9yX2luZm8iLCBoYXNoTWFwLmdldCgiZXJyb3JfbXNnIikp",
                                "postExecute": "",
                                "alias": ""
                            }
                        ]
                    }
                ]
            }
        ],
        "host_uid": "62bec0b55f2340a98cdc950ddd50d853",
        "ConfigurationFileName": "Simple_3.v1.ui",
        "agent": false,
        "MenuWebTemplate": "",
        "HTMLHead": "",
        "HTMLdocument_ready": "",
        "PyGeneral": "",
        "PelicanInit": "[\n  {\n    \"database\": \"egais\",\n    \"RAM\": false,\n    \"singleton\": true,\n    \"initialize\": true,\n  }\n]",
        "ConfigurationSettings": {
            "dictionaries": "",
            "vendor": "",
            "vendor_url": "",
            "vendor_password": "",
            "handler_split_mode": false,
            "handler_url": "",
            "handler_password": ""
        },
        "Layouts": [
            {
                "type": "LinearLayout",
                "orientation": "vertical",
                "height": "match_parent",
                "width": "match_parent",
                "Variable": "DOC_ROW",
                "Elements": [
                    {
                        "type": "LinearLayout",
                        "orientation": "vertical",
                        "height": "match_parent",
                        "width": "match_parent",
                        "Elements": [
                            {
                                "type": "TextView",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "Value": "@barcode",
                                "weight": "1",
                                "type_s": "Надпись",
                                "width_value": "match_parent",
                                "height_value": "wrap_content"
                            },
                            {
                                "type": "TextView",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "Value": "@number",
                                "weight": "1",
                                "type_s": "Надпись",
                                "width_value": "match_parent",
                                "height_value": "wrap_content"
                            },
                            {
                                "type": "TextView",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "Value": "@date",
                                "weight": "1",
                                "type_s": "Надпись",
                                "width_value": "match_parent",
                                "height_value": "wrap_content"
                            }
                        ],
                        "height_value": "match_parent",
                        "width_value": "match_parent",
                        "type_s": "Контейнер",
                        "weight": "0",
                        "StrokeWidth": "1",
                        "Padding": "4",
                        "Radius": "8"
                    }
                ]
            },
            {
                "type": "LinearLayout",
                "orientation": "vertical",
                "height": "match_parent",
                "width": "match_parent",
                "Variable": "DOC_TABLE_ROW",
                "Elements": [
                    {
                        "type": "LinearLayout",
                        "orientation": "horizontal",
                        "height": "match_parent",
                        "width": "match_parent",
                        "StrokeWidth": "1",
                        "Padding": "4",
                        "Radius": "8",
                        "Elements": [
                            {
                                "type": "TextView",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "Value": "@barcode",
                                "type_s": "Надпись",
                                "height_value": "wrap_content",
                                "width_value": "wrap_content",
                                "weight": "0"
                            },
                            {
                                "type": "TextView",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "Value": "@number",
                                "type_s": "Надпись",
                                "height_value": "wrap_content",
                                "width_value": "wrap_content",
                                "weight": "0"
                            },
                            {
                                "type": "TextView",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "Value": "@date",
                                "type_s": "Надпись",
                                "height_value": "wrap_content",
                                "width_value": "wrap_content",
                                "weight": "0"
                            }
                        ],
                        "height_value": "match_parent",
                        "width_value": "match_parent",
                        "type_s": "Контейнер",
                        "weight": "0"
                    }
                ]
            }
        ],
        "uid": "93c1a131c2334bcdbf6ac3f0c07bd271",
        "PyHandlers": "IiIiIiIiDQoNCiMgc2Nhbl9pbnRlcmZhY2UucHkNCmltcG9ydCBqc29uDQppbXBvcnQgdGltZQ0KZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzLCBhc2RpY3QNCg0KIyDQn9GA0L7QsdGD0LXQvCDQuNC80L/QvtGA0YLQuNGA0L7QstCw0YLRjCwg0LXRgdC70Lgg0L3QtdGCINGB0YDQsNC30YMg0L/QvtC80LXRh9Cw0LXQvA0KdHJ5Og0KICAgIGZyb20gcGVsaWNhbiBpbXBvcnQgcGVsaWNhbnMgIyB0eXBlOiBpZ25vcmUNCiAgICBfSEFTX1BFTElDQU4gPSBUcnVlDQpleGNlcHQgRXhjZXB0aW9uOg0KICAgIF9IQVNfUEVMSUNBTiA9IEZhbHNlDQoNCkBkYXRhY2xhc3MNCmNsYXNzIENhcmRJdGVtOg0KICAgIGNvZGU6IHN0cg0KICAgIG1ldGE6IGRpY3QgfCBOb25lID0gTm9uZQ0KDQogICAgZGVmIHRvX2RpY3Qoc2VsZik6DQogICAgICAgIGQgPSBhc2RpY3Qoc2VsZikNCiAgICAgICAgIyByZW1vdmUgTm9uZSBtZXRhDQogICAgICAgIGlmIGQuZ2V0KCJtZXRhIikgaXMgTm9uZToNCiAgICAgICAgICAgIGQucG9wKCJtZXRhIiwgTm9uZSkNCiAgICAgICAgcmV0dXJuIGQNCg0KY2xhc3MgVGFibGU6DQogICAgIiIiDQogICAg0J/RgNC+0YHRgtCw0Y8g0YPRgtC40LvQuNGC0LAg0LTQu9GPINGE0L7RgNC80LjRgNC+0LLQsNC90LjRjyBUYWJsZUxheW91dCBKU09OINC40LvQuCBDYXJkc0xheW91dCBKU09OLg0KICAgINCY0YHQv9C+0LvRjNC30YPQtdC8IFRhYmxlTGF5b3V0IChjdXN0b210YWJsZSAvIHRhYmxlZGF0YSkg0LIgTVJFLg0KDQogICAgaHR0cHM6Ly91aXR4dC5yZWFkdGhlZG9jcy5pby9ydS9sYXRlc3Qvc2NyZWVucy5odG1sI2lkNDANCg0KICAgIC0gYF5ET0NfUk9XIC0g0YHRgtGA0L7QutCwINC+0L/QuNGB0LDQvdC90L7Qs9C+INC60L7QvdGC0LXQudC90LXRgNCwLCDQv9GA0LXQtNCy0LDRgNC40YLQtdC70YzQvdC+INGC0YDQtdCx0YPQtdGC0YHRjyDQvtC/0LjRgdCw0YLRjCDQuCDRgdC+0LfQtNCw0YLRjCDQtdCz0L4g0LIg0LLQtdCx0LVgDQogICAgLSBgeyAiY3VzdG9tdGFibGUiDQogICAgICAgICAgICA6ew0KICAgICAgICAgICAgICAgICJvcHRpb25zIjrQntCf0KbQmNCYLA0KICAgICAgICAgICAgICAgICJsYXlvdXQiOiDQmtCe0J3QotCV0JnQndCV0KAsDQogICAgICAgICAgICAgICAgInRhYmxlZGF0YSI6INCU0JDQotCQ0KHQldCiDQogICAgICAgICAgICB9DQogICAgICAgIH1gDQogICAgIiIiDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxheW91dD0iXkRPQ19ST1ciLCBvcHRpb25zPU5vbmUpOg0KICAgICAgICBzZWxmLmxheW91dCA9IGxheW91dA0KICAgICAgICBzZWxmLm9wdGlvbnMgPSBvcHRpb25zIG9yIHsic2VhcmNoX2VuYWJsZWQiOiBUcnVlLCAic2F2ZV9wb3NpdGlvbiI6IFRydWV9DQoNCiAgICBkZWYgYnVpbGRfdGFibGVfanNvbihzZWxmLCBpdGVtczogbGlzdFtkaWN0XSk6DQogICAgICAgIHdyYXBwZXIgPSB7DQogICAgICAgICAgICAiY3VzdG9tdGFibGUiOiB7DQogICAgICAgICAgICAgICAgIm9wdGlvbnMiOiBzZWxmLm9wdGlvbnMsDQogICAgICAgICAgICAgICAgImxheW91dCI6IHNlbGYubGF5b3V0LA0KICAgICAgICAgICAgICAgICJ0YWJsZWRhdGEiOiBpdGVtcw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHdyYXBwZXIsIGVuc3VyZV9hc2NpaT1GYWxzZSkNCg0KY2xhc3MgUGVsaWNhbkFkYXB0ZXI6DQogICAgIiIiDQogICAg0JzQuNC90LjQvNCw0LvRjNC90YvQuSDQsNC00LDQv9GC0LXRgCDQtNC70Y8gUGVsaWNhbkRCDQogICAg0KDQsNCx0L7RgtCw0LXRgiDRgSDQutC+0LvQu9C10LrRhtC40Y/QvNC4INC/0L4g0LDQvdCw0LvQvtCz0LjQuCBNb25nb0RCIC8gU2ltcGxlQmFzZQ0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkYl9uYW1lPSJlZ2Fpc19wZW5kaW5nIik6DQogICAgICAgIGlmIG5vdCBfSEFTX1BFTElDQU46DQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIlBlbGljYW4gbm90IGF2YWlsYWJsZSIpDQogICAgICAgIHNlbGYuZGIgPSBwZWxpY2Fuc1tkYl9uYW1lXSAgIyB0eXBlOiBpZ25vcmUNCg0KICAgICMgLS0tLSBCYXNpYyAtLS0tDQogICAgZGVmIGdldChzZWxmLCBjb2xsZWN0aW9uOiBzdHIsIF9pZDogc3RyKToNCiAgICAgICAgIiIi0J/QvtC70YPRh9C40YLRjCDQt9Cw0L/QuNGB0Ywg0YHRgtGA0L7Qs9C+INC/0L4gX2lkIiIiDQogICAgICAgIHJldHVybiBzZWxmLmRiW2NvbGxlY3Rpb25dLmdldChfaWQpDQoNCiAgICBkZWYgYWxsKHNlbGYsIGNvbGxlY3Rpb246IHN0cik6DQogICAgICAgICIiItCS0YHQtSDQtNC+0LrRg9C80LXQvdGC0Ysg0LrQvtC70LvQtdC60YbQuNC4IiIiDQogICAgICAgIHJldHVybiBzZWxmLmRiW2NvbGxlY3Rpb25dLmFsbCgpDQoNCiAgICBkZWYgZmluZChzZWxmLCBjb2xsZWN0aW9uOiBzdHIsIHF1ZXJ5OiBkaWN0KToNCiAgICAgICAgIiIiDQogICAgICAgINCf0L7QuNGB0Log0L/QviDQt9Cw0L/RgNC+0YHRgw0KICAgICAgICBgYXNfbGlzdD1UcnVlYCAtPiDQstC10YDQvdGR0YIgbGlzdA0KICAgICAgICBgYXNfbGlzdD1GYWxzZWAgLT4g0LLQtdGA0L3RkdGCINC60YPRgNGB0L7RgCAo0LvQtdC90LjQstC+KQ0KICAgICAgICAiIiINCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmRiW2NvbGxlY3Rpb25dLmZpbmQocXVlcnkpDQogICAgICAgIHJldHVybiByZXNwb25zZQ0KDQogICAgIyAtLS0tIEluc2VydCAvIFVwZGF0ZSAvIERlbGV0ZSAtLS0tDQogICAgZGVmIHB1c2goc2VsZiwgY29sbGVjdGlvbjogc3RyLCByZWNvcmQ6IGRpY3QsIHVwc2VydDogYm9vbCA9IEZhbHNlKToNCiAgICAgICAgcmV0dXJuIHNlbGYuZGJbY29sbGVjdGlvbl0uaW5zZXJ0KHJlY29yZCwgdXBzZXJ0PXVwc2VydCkNCg0KICAgIGRlZiB1cGRhdGUoc2VsZiwgY29sbGVjdGlvbjogc3RyLCBkYXRhOiBkaWN0LCB1cGRhdGVkOiBib29sID0gVHJ1ZSk6DQogICAgICAgICIiIiNVcGRhdGUgLSDQv9C+0LjRgdC6LCDQvtCx0L3QvtCy0LvQtdC90LjQtSDQtNC+0LrRg9C80LXQvdGC0L7QsiDQutC+0LvQu9C10LrRhtC40LjQuA0KICAgICAgICAgICAgI9Cj0YHQu9C+0LLQuNC1IHVwZGF0ZSDQsNC90LDQu9C+0LPQuNGH0L3RiyBmaW5kLCBhINCw0YDQs9GD0LzQtdC90YIg0LTQsNC90L3Ri9GFIC0gaW5zZXJ0L3Vwc2VydA0KICAgICAgICAgICAgYGRiWyJnb29kcyJdLnVwZGF0ZSh7Im5hbWUiOiLQn9C10YDRgdC40LoifSx7InVwZGF0ZWQiOlRydWV9KQ0KICAgICAgICAgICAgcHJpbnQoZGJbImdvb2RzIl0uZmluZCh7Im5hbWUiOiLQn9C10YDRgdC40LoifSkpYA0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuZGJbY29sbGVjdGlvbl0udXBkYXRlKGRhdGEsIHsidXBkYXRlZCI6IHVwZGF0ZWR9KQ0KDQogICAgZGVmIHJlbW92ZV9ieV9pZChzZWxmLCBjb2xsZWN0aW9uOiBzdHIsIGxvYzogZGljdCk6DQogICAgICAgICIiItCj0YHQu9C+0LLQuNC1IGRlbGV0ZSDQsNC90LDQu9C+0LPQuNGH0L3RiyBmaW5kLCDQsCDQsNGA0LPRg9C80LXQvdGCINC00LDQvdC90YvRhSAtIGluc2VydC91cHNlcnQNCiAgICAgICAgICAgIGBkYlsiZ29vZHMiXS5kZWxldGUoeyJuYW1lIjoi0J/QtdGA0YHQuNC6In0pYA0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuIHNlbGYuZGJbY29sbGVjdGlvbl0uZGVsZXRlKGxvYykNCg0KDQoNCkBkYXRhY2xhc3MNCmNsYXNzIFBvc2l0aW9uOg0KICAgIGNvZGU6IHN0cg0KICAgIHRzOiBzdHINCg0KY2xhc3MgU2NhblNlc3Npb246DQogICAgQ1VSX0RPQyA9ICJjdXJyZW50X2RvYyINCiAgICBDVVJfSVRFTVMgPSAiY3VycmVudF9pdGVtcyINCiAgICBQRU5ESU5HID0gInBlbmRpbmdfZG9jcyINCiAgICBTRU5UID0gInNlbnRfZG9jcyINCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoTWFwLCBwZWxpY2FuX25hbWU9ImVnYWlzIik6DQogICAgICAgIHNlbGYuaGFzaE1hcCA9IGhhc2hNYXANCiAgICAgICAgc2VsZi5kYiA9IFBlbGljYW5BZGFwdGVyKHBlbGljYW5fbmFtZSkNCg0KICAgICMgLS0tIGhlbHBlcnMgLS0tDQogICAgZGVmIF9ub3coc2VsZik6DQogICAgICAgIHJldHVybiB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZFQlSDolTTolU1oiLCB0aW1lLmdtdGltZSgpKQ0KDQogICAgIyAtLS0gZG9jdW1lbnQgbGlmZWN5Y2xlIC0tLQ0KICAgIGRlZiBzdGFydF9kb2Moc2VsZiwgYmFyY29kZTogc3RyKToNCiAgICAgICAgc2VsZi5kYi5kYltzZWxmLkNVUl9ET0NdLmNsZWFyKCkNCiAgICAgICAgc2VsZi5kYi5kYltzZWxmLkNVUl9JVEVNU10uY2xlYXIoKQ0KICAgICAgICBkb2MgPSB7Il9pZCI6ICJhY3RpdmUiLCAiYmFyY29kZSI6IGJhcmNvZGUsICJzdGFydGVkIjogc2VsZi5fbm93KCksICJzdGF0dXMiOiAiYWN0aXZlIn0NCiAgICAgICAgc2VsZi5kYi5wdXNoKHNlbGYuQ1VSX0RPQywgZG9jKQ0KDQogICAgZGVmIGdldF9kb2Moc2VsZik6DQogICAgICAgIGRvY3MgPSBzZWxmLmRiLmFsbChzZWxmLkNVUl9ET0MpDQogICAgICAgIHJldHVybiBkb2NzWzBdIGlmIGRvY3MgZWxzZSBOb25lDQoNCiAgICBkZWYgZ2V0X2RvY19uYW1lKHNlbGYpOg0KICAgICAgICBkID0gc2VsZi5nZXRfZG9jKCkNCiAgICAgICAgcmV0dXJuIGRbImJhcmNvZGUiXSBpZiBkIGVsc2UgIiINCg0KICAgICMgLS0tIHNjYW5uaW5nIC0tLQ0KICAgIGRlZiBhZGRfc2NhbihzZWxmLCBjb2RlOiBzdHIpOg0KICAgICAgICBleGlzdGluZyA9IFt4LmdldCgiY29kZSIpIGZvciB4IGluIHNlbGYuZGIuYWxsKHNlbGYuQ1VSX0lURU1TKV0NCiAgICAgICAgaWYgY29kZSBpbiBleGlzdGluZzoNCiAgICAgICAgICAgIHJldHVybiAiZHVwbGljYXRlIg0KICAgICAgICBwb3MgPSB7ImNvZGUiOiBjb2RlLCAidHMiOiBzZWxmLl9ub3coKX0NCiAgICAgICAgc2VsZi5kYi5wdXNoKHNlbGYuQ1VSX0lURU1TLCBwb3MpDQogICAgICAgIHJldHVybiAiYWRkZWQiDQoNCiAgICBkZWYgcmVtb3ZlX3NjYW4oc2VsZiwgY29kZTogc3RyKToNCiAgICAgICAgZm9yIGl0IGluIHNlbGYuZGIuYWxsKHNlbGYuQ1VSX0lURU1TKToNCiAgICAgICAgICAgIGlmIGl0LmdldCgiY29kZSIpID09IGNvZGU6DQogICAgICAgICAgICAgICAgc2VsZi5kYi5yZW1vdmVfYnlfaWQoc2VsZi5DVVJfSVRFTVMsIGl0WyJfaWQiXSkNCg0KICAgICMgLS0tIHRhYmxlIEpTT04gZm9yIFVJIC0tLQ0KICAgIGRlZiBidWlsZF90YWJsZV9qc29uKHNlbGYpOg0KICAgICAgICByb3dzID0gW3siY29kZSI6IGl0LmdldCgiY29kZSIpfSBmb3IgaXQgaW4gc2VsZi5kYi5hbGwoc2VsZi5DVVJfSVRFTVMpXQ0KICAgICAgICByZXR1cm4ganNvbi5kdW1wcyh7DQogICAgICAgICAgICAiY3VzdG9tdGFibGUiOiB7DQogICAgICAgICAgICAgICAgIm9wdGlvbnMiOiB7InNlYXJjaF9lbmFibGVkIjogRmFsc2UsICJzYXZlX3Bvc2l0aW9uIjogRmFsc2V9LA0KICAgICAgICAgICAgICAgICJsYXlvdXQiOiAiXnRhYmxlX3JvdyIsDQogICAgICAgICAgICAgICAgInRhYmxlZGF0YSI6IHJvd3MNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgZW5zdXJlX2FzY2lpPUZhbHNlKQ0KDQogICAgIyAtLS0gZmluaXNoICYgcXVldWUgLS0tDQogICAgZGVmIGZpbmlzaChzZWxmLCBlbmRwb2ludDogc3RyIHwgTm9uZSA9IE5vbmUpOg0KICAgICAgICBkb2MgPSBzZWxmLmdldF9kb2MoKQ0KICAgICAgICBpZiBub3QgZG9jOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgIGl0ZW1zID0gc2VsZi5kYi5hbGwoc2VsZi5DVVJfSVRFTVMpDQogICAgICAgIGVudmVsb3BlID0gew0KICAgICAgICAgICAgImRvYyI6IHsNCiAgICAgICAgICAgICAgICAiYmFyY29kZSI6IGRvY1siYmFyY29kZSJdLA0KICAgICAgICAgICAgICAgICJjcmVhdGVkIjogZG9jWyJzdGFydGVkIl0sDQogICAgICAgICAgICAgICAgImZpbmlzaGVkIjogc2VsZi5fbm93KCksDQogICAgICAgICAgICAgICAgInN0YXR1cyI6ICJwZW5kaW5nIg0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJpdGVtcyI6IGl0ZW1zDQogICAgICAgIH0NCg0KICAgICAgICBzZW50ID0gRmFsc2UNCiAgICAgICAgaWYgZW5kcG9pbnQ6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaW1wb3J0IHJlcXVlc3RzICMgdHlwZTogaWdub3JlDQogICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoZW5kcG9pbnQsIGpzb249ZW52ZWxvcGUsIHRpbWVvdXQ9NykNCiAgICAgICAgICAgICAgICBpZiAyMDAgPD0gci5zdGF0dXNfY29kZSA8IDMwMDoNCiAgICAgICAgICAgICAgICAgICAgZW52ZWxvcGVbImRvYyJdWyJzdGF0dXMiXSA9ICJzZW50Ig0KICAgICAgICAgICAgICAgICAgICBzZW50ID0gVHJ1ZQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgICAgICBwYXNzDQoNCiAgICAgICAgdGFyZ2V0ID0gc2VsZi5TRU5UIGlmIHNlbnQgZWxzZSBzZWxmLlBFTkRJTkcNCiAgICAgICAgc2VsZi5kYi5wdXNoKHRhcmdldCwgZW52ZWxvcGUpDQoNCiAgICAgICAgIyDQvtGH0LjRgdGC0LjRgtGMINCw0LrRgtC40LLQvdGD0Y4g0YHQtdGB0YHQuNGODQogICAgICAgIHNlbGYuZGIuZGJbc2VsZi5DVVJfRE9DXS5jbGVhcigpDQogICAgICAgIHNlbGYuZGIuZGJbc2VsZi5DVVJfSVRFTVNdLmNsZWFyKCkNCiAgICAgICAgcmV0dXJuIHNlbnQNCg0KICAgICMgLS0tIHJlc2VuZCBwZW5kaW5nIHF1ZXVlIC0tLQ0KICAgIGRlZiByZXRyeV9wZW5kaW5nKHNlbGYsIGVuZHBvaW50OiBzdHIpOg0KICAgICAgICBwZW5kID0gc2VsZi5kYi5hbGwoc2VsZi5QRU5ESU5HKQ0KICAgICAgICBmb3IgcmVjIGluIHBlbmQ6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaW1wb3J0IHJlcXVlc3RzICMgdHlwZTogaWdub3JlDQogICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoZW5kcG9pbnQsIGpzb249cmVjLCB0aW1lb3V0PTcpDQogICAgICAgICAgICAgICAgaWYgMjAwIDw9IHIuc3RhdHVzX2NvZGUgPCAzMDA6DQogICAgICAgICAgICAgICAgICAgIHJlY1siZG9jIl1bInN0YXR1cyJdID0gInNlbnQiDQogICAgICAgICAgICAgICAgICAgIHNlbGYuZGIucHVzaChzZWxmLlNFTlQsIHJlYykNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYi5yZW1vdmVfYnlfaWQoc2VsZi5QRU5ESU5HLCByZWNbIl9pZCJdKQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgICAgICBwYXNzDQoNCg==",
        "CommonHandlers": [
            {
                "event": "onPelicanInitialized",
                "action": "run",
                "listener": "",
                "type": "pythonscript",
                "method": "dG9hc3QoIkRhdGFiYXNlIGluaXRpbGl6YXRlZCBzdWNjZXNzZnVsbHkhIik=",
                "postExecute": "",
                "alias": ""
            },
            {
                "event": "onPelicanInitError",
                "action": "run",
                "listener": "",
                "type": "pythonscript",
                "method": "a2V5cyA9IFtrIGZvciBrIGluIGhhc2hNYXAua2V5U2V0KCkgaWYgImVyciIgaW4gay5sb3dlcigpIG9yICJleCIgaW4gay5sb3dlcigpXQptc2cgPSAiXG4iLmpvaW4oZiJ7a306IHtoYXNoTWFwLmdldChrKX0iIGZvciBrIGluIGtleXMpCnRvYXN0KCJEQiBFUlI6XG4iICsgbXNnIGlmIG1zZyBlbHNlICJObyBkZWJ1ZyBrZXlzIGZvdW5kIikK",
                "postExecute": "",
                "alias": ""
            }
        ],
        "PyFiles": [
            {
                "PyFileKey": "scan_interface",
                "PyFileData": "aW1wb3J0IGpzb24NCmltcG9ydCByYW5kb20NCmltcG9ydCB0aW1lDQpmcm9tIHR5cGluZyBpbXBvcnQgQW55DQppbXBvcnQgdXVpZA0KZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzDQoNCiMgSmF2YSBicmlkZ2UgaGVscGVyIGluIFNpbXBsZVVJDQp0cnk6DQogICAgZnJvbSBydS50cmF2ZWxmb29kLnNpbXBsZV91aSBpbXBvcnQgU2ltcGxlVXRpbGl0ZXMgYXMgc3VDbGFzcyAjIHR5cGU6IGlnbm9yZQ0KZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICBzdUNsYXNzID0gTm9uZQ0KDQp0cnk6DQogICAgIyBJZiBwcm9qZWN0IHByb3ZpZGVzIHB5c2ltcGxlYmFzZQ0KICAgIGZyb20gcHlzaW1wbGViYXNlIGltcG9ydCBTaW1wbGVCYXNlLCBEQlNlc3Npb24NCmV4Y2VwdCBFeGNlcHRpb246DQogICAgIyBTb21lIFNpbXBsZVVJIGluc3RhbGxhdGlvbnMgcHJvdmlkZSBTaW1wbGVCYXNlIG9uIGNsYXNzcGF0aCBhY2Nlc3NpYmxlIHRocm91Z2ggc2FtZSBuYW1lLg0KICAgIFNpbXBsZUJhc2UgPSBOb25lDQogICAgREJTZXNzaW9uID0gTm9uZQ0KDQoNCiMgS2V5cw0KSURfS0VZID0gIl9pZCINCkJBUkNPREVfS0VZID0gImJhcmNvZGUiDQpOVU1CRVJfS0VZID0gIm51bWJlciINCk1FVEFfS0VZID0gIm1ldGEiDQpEQVRFX0tFWSA9ICJkYXRlIg0KU0NBTl9OT00gPSAic2Nhbl9ub20iDQpTQ0FOX1BMQU4gPSAic2Nhbl9wbGFuIg0KU0NBTl9GQUNUID0gInNjYW5fZmFjdCINCg0KQGRhdGFjbGFzcw0KY2xhc3MgRG9jdW1lbnQ6DQogICAgYmFyY29kZTogc3RyDQogICAgbnVtYmVyOiBpbnQNCiAgICBtZXRhOiBkaWN0DQogICAgZGF0ZTogc3RyDQoNCg0KICAgIGRlZiB0b19kaWN0KHNlbGYpOg0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgQkFSQ09ERV9LRVk6IHNlbGYuYmFyY29kZSwNCiAgICAgICAgICAgIE5VTUJFUl9LRVk6IHNlbGYubnVtYmVyLA0KICAgICAgICAgICAgTUVUQV9LRVk6IHNlbGYubWV0YSwNCiAgICAgICAgICAgIERBVEVfS0VZOiBzZWxmLmRhdGUsDQogICAgICAgIH0NCg0KICAgIEBjbGFzc21ldGhvZA0KICAgIGRlZiBmcm9tX2RpY3QoY2xzLCBkYXRhOiBkaWN0KToNCiAgICAgICAgcmV0dXJuIGNscygNCiAgICAgICAgICAgIGJhcmNvZGU9ZGF0YS5nZXQoQkFSQ09ERV9LRVksICJ1bmtub3duIiksDQogICAgICAgICAgICBudW1iZXI9ZGF0YS5nZXQoTlVNQkVSX0tFWSwgMCksDQogICAgICAgICAgICBtZXRhPWRhdGEuZ2V0KE1FVEFfS0VZLCB7fSksDQogICAgICAgICAgICBkYXRlPWRhdGEuZ2V0KERBVEVfS0VZLCAidW5rbm93biIpLA0KICAgICAgICApDQoNCiMgLS0tIFNpbXBsZUJhc2UgYWRhcHRlciAod3JhcCBkaWZmZXJlbmNlcykgLS0tDQpjbGFzcyBTaW1wbGVCYXNlQWRhcHRlcjoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgZGJuYW1lPSJlZ2FpcyIsIHRpbWVvdXQ9MjAwKToNCiAgICAgICAgaWYgc3VDbGFzcyBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTaW1wbGVVdGlsaXRlcyBicmlkZ2UgKHN1Q2xhc3MpIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCIpDQogICAgICAgIHBhdGggPSBzdUNsYXNzLmdldF9zaW1wbGViYXNlX2RpcigpDQogICAgICAgIGlmIE5vbmUgaW4gKFNpbXBsZUJhc2UsIERCU2Vzc2lvbik6DQogICAgICAgICAgICAjIHRyeSB0byBpbXBvcnQgbG9jYWxseSBuYW1lZCBjbGFzcyB2aWEgcnUuLi4gaWYgcHJlc2VudA0KICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTaW1wbGVCYXNlIChQeVNpbXBsZUJhc2UpIG5vdCBhdmFpbGFibGU7IGluc3RhbGwgcHlzaW1wbGViYXNlIG9yIGNoZWNrIHJ1bnRpbWUiKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2VsZi5fZGIgPSBTaW1wbGVCYXNlKGRibmFtZSwgcGF0aD1wYXRoLCB0aW1lb3V0PXRpbWVvdXQpICMgdHlwZTogaWdub3JlDQoNCiAgICAjIC0tLSBsb3ctbGV2ZWwgaGVscGVyczogbm9ybWFsaXplIEFQSSBkaWZmZXJlbmNlcyAtLS0NCiAgICBkZWYgaW5zZXJ0KHNlbGYsIGNvbGxlY3Rpb246IHN0ciwgZGF0YTogZGljdCB8IGxpc3RbZGljdF0gLCBzZXNzaW9uPUZhbHNlKToNCiAgICAgICAgIiIiSW5zZXJ0IG9uZSBkb2Mgb3IgbGlzdCBvZiBkb2NzIiIiDQogICAgICAgIGlmIG5vdCBzZXNzaW9uOg0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiW2NvbGxlY3Rpb25dLmluc2VydChkYXRhKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhLCBsaXN0KToNCiAgICAgICAgICAgICAgICB3aXRoIERCU2Vzc2lvbigpIGFzIHM6ICMgdHlwZTogaWdub3JlDQogICAgICAgICAgICAgICAgICAgIGZvciBkb2MgaW4gZGF0YToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RiW2NvbGxlY3Rpb25dLmluc2VydChkb2MsIHNlc3Npb249cykNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgc2VsZi5fZGJbY29sbGVjdGlvbl0uaW5zZXJ0KGRhdGEpDQoNCiAgICBkZWYgYWxsKHNlbGYsIGNvbGxlY3Rpb246IHN0cik6DQogICAgICAgICIiIlJldHVybiBsaXN0IG9mIGFsbCBkb2NzIGluIGNvbGxlY3Rpb24iIiINCiAgICAgICAgcmV0dXJuIHNlbGYuX2RiW2NvbGxlY3Rpb25dLmFsbCgpDQoNCiAgICBkZWYgZmluZChzZWxmLCBjb2xsZWN0aW9uLCBxdWVyeT1Ob25lIHwgZGljdCk6DQogICAgICAgIHEgPSBxdWVyeSBvciB7fQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fZGJbY29sbGVjdGlvbl0uZmluZChxKS5hbGwoKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9kYltjb2xsZWN0aW9uXS5maW5kKHEpDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOg0KICAgICAgICAgICAgICAgIHJldHVybiBbXQ0KDQogICAgZGVmIGdldChzZWxmLCBjb2xsZWN0aW9uLCBfaWQpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gc2VsZi5fZGJbY29sbGVjdGlvbl0uZ2V0KF9pZCkNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZGJbY29sbGVjdGlvbl0uZ2V0KF9pZCkNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUNCg0KICAgIGRlZiB1cGRhdGUoc2VsZiwgY29sbGVjdGlvbiwgb2JqOiBkaWN0LCBuZXdfb2JqOiBkaWN0KToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RiW2NvbGxlY3Rpb25dLnVwZGF0ZShvYmosIG5ld19vYmopDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgICAgICByZXR1cm4gTm9uZQ0KDQogICAgZGVmIGRlbGV0ZShzZWxmLCBjb2xsZWN0aW9uLCBfaWQpOg0KICAgICAgICBzZWxmLl9kYltjb2xsZWN0aW9uXS5kZWxldGUoW19pZF0pDQoNCiAgICBkZWYgY2xlYXJfY29sbGVjdGlvbihzZWxmLCBjb2xsZWN0aW9uKToNCiAgICAgICAgIiIiUmVtb3ZlIGFsbCBkb2NzIGluIGEgY29sbGVjdGlvbiAoaGVscGVyKS4iIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5fZGJbY29sbGVjdGlvbl0uY2xlYXIoKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uOg0KICAgICAgICAgICAgIyBmYWxsYmFjazogcmVhZCBhbGwgYW5kIGRlbGV0ZSBpbmRpdmlkdWFsbHkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBhbGxfZG9jcyA9IHNlbGYuYWxsKGNvbGxlY3Rpb24pDQogICAgICAgICAgICAgICAgZm9yIGQgaW4gYWxsX2RvY3M6DQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZCwgZGljdCkgYW5kIElEX0tFWSBpbiBkOg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kZWxldGUoY29sbGVjdGlvbiwgZFtJRF9LRVldKQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgICAgICBwYXNzDQoNCg0KIyAtLS0gQXBwbGljYXRpb24gY2xhc3MgKFNjYW5TZXNzaW9uKSAtLS0NCmNsYXNzIFNjYW5TZXNzaW9uOg0KICAgICIiIg0KICAgIEhpZ2gtbGV2ZWwgc2Vzc2lvbiBBUEkgc3VpdGFibGUgZm9yIFNpbXBsZVVJIGhhbmRsZXJzLg0KICAgIFRoaXMgY2xhc3MgRE9FUyBOT1QgY2FsbCB0b2FzdC9oYXNoTWFwIGV0YyBieSBpdHNlbGYg4oCUIGl0IHJldHVybnMgcmVzdWx0cw0KICAgIGFuZCByYWlzZXMgZXhjZXB0aW9ucy4gSGFuZGxlcnMgc2hvdWxkIGNhdGNoIGFuZCB1c2UgdG9hc3QoKS4NCiAgICAiIiINCiAgICANCiAgICBDT0xMX0NVUlJFTlRfRE9DID0gImN1cnJlbnRfZG9jIg0KICAgIENPTExfQ1VSUkVOVF9JVEVNUyA9ICJjdXJyZW50X2l0ZW1zIg0KICAgIENPTExfUEVORElORyA9ICJwZW5kaW5nX2RvY3MiDQogICAgQ09MTF9TRU5UID0gInNlbnRfZG9jcyINCg0KICAgIENBUkRTX0xBWU9VVCA9ICJeQVVUTyINCiAgICBUQUJMRV9MQVlPVVQgPSAiXkFVVE8iDQoNCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaE1hcCwgZGJuYW1lPSJlZ2FpcyIpOg0KICAgICAgICBzZWxmLmhhc2hNYXAgPSBoYXNoTWFwDQogICAgICAgICMgaW5zdGFudGlhdGUgREIgYWRhcHRlciAodGhpcyB3aWxsIGNyZWF0ZSBvciBvcGVuIHRoZSBTaW1wbGVCYXNlIERCIGF0IHJ1bnRpbWUpDQogICAgICAgIHNlbGYuZGIgPSBTaW1wbGVCYXNlQWRhcHRlcihkYm5hbWUpDQoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgIyBjaGVja2luZyBhY2Nlc3MNCiAgICAgICAgICAgIF8gPSBzZWxmLmRiLmFsbChzZWxmLkNPTExfQ1VSUkVOVF9ET0MpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgICAgICAjIHNpbGVudCBmYWxsYmFjaw0KICAgICAgICAgICAgcGFzcw0KDQogICAgIyAtLS0gdGltZSBoZWxwZXIgLS0tDQogICAgZGVmIF9ub3coc2VsZik6DQogICAgICAgIHJldHVybiB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZFQlSDolTTolU1oiLCB0aW1lLmdtdGltZSgpKQ0KDQogICAgIyAtLS0gc2Vzc2lvbiBsaWZlIGN5Y2xlIC0tLQ0KICAgIGRlZiBzdGFydF9kb2Moc2VsZiwgZGF0YTogZGljdFtzdHIsIHN0cl0sIG1ldGE9Tm9uZSk6DQogICAgICAgICIiIlN0YXJ0IGEgbmV3IGFjdGl2ZSBkb2N1bWVudCAoY2xlYXJzIHByZXZpb3VzIGFjdGl2ZSBzZXNzaW9uKSIiIg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzZWxmLmRiLmNsZWFyX2NvbGxlY3Rpb24oc2VsZi5DT0xMX0NVUlJFTlRfRE9DKQ0KICAgICAgICAgICAgc2VsZi5kYi5jbGVhcl9jb2xsZWN0aW9uKHNlbGYuQ09MTF9DVVJSRU5UX0lURU1TKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uOg0KICAgICAgICAgICAgIyBpZ25vcmUgaWYgY2xlYXIgbm90IHN1cHBvcnRlZA0KICAgICAgICAgICAgcGFzcw0KICAgICAgICBfaWQgPSBkYXRhLmdldCgiX2lkIikNCiAgICAgICAgYmFyY29kZSA9IGRhdGEuZ2V0KCJiYXJjb2RlIikNCiAgICAgICAgbnVtYmVyID0gZGF0YS5nZXQoIm51bWJlciIpDQogICAgICAgIGRhdGUgPSBkYXRhLmdldCgiZGF0ZSIpDQoNCiAgICAgICAgZG9jID0gew0KICAgICAgICAgICAgIl9pZCI6IF9pZCwNCiAgICAgICAgICAgICJiYXJjb2RlIjogYmFyY29kZSwNCiAgICAgICAgICAgICJudW1iZXIiOiBudW1iZXIsDQogICAgICAgICAgICAiZGF0ZSI6IGRhdGUsDQogICAgICAgICAgICAibWV0YSI6IG1ldGEgb3Ige30sDQogICAgICAgICAgICAic3RhdHVzIjogImFjdGl2ZSINCiAgICAgICAgfQ0KICAgICAgICBzZWxmLmRiLmluc2VydChzZWxmLkNPTExfQ1VSUkVOVF9ET0MsIGRvYykNCiAgICAgICAgcmV0dXJuIGRvYw0KDQogICAgZGVmIGdldF9hY3RpdmVfZG9jKHNlbGYpIC0+IGRpY3QgfCBOb25lOg0KICAgICAgICBkb2NzID0gc2VsZi5kYi5hbGwoc2VsZi5DT0xMX0NVUlJFTlRfRE9DKQ0KICAgICAgICBpZiBub3QgZG9jczoNCiAgICAgICAgICAgIHJldHVybiBOb25lDQogICAgICAgIHJldHVybiBkb2NzWzBdDQoNCiAgICBkZWYgZ2V0X2FjdGl2ZV9iYXJjb2RlKHNlbGYpOg0KICAgICAgICBkID0gc2VsZi5nZXRfYWN0aXZlX2RvYygpDQogICAgICAgIHJldHVybiAoZC5nZXQoImJhcmNvZGUiKSBpZiBkIGVsc2UgTm9uZSkNCg0KICAgICMgLS0tIGl0ZW1zIC0tLQ0KICAgIGRlZiBsaXN0X2l0ZW1zKHNlbGYpOg0KICAgICAgICByZXR1cm4gc2VsZi5kYi5hbGwoc2VsZi5DT0xMX0NVUlJFTlRfSVRFTVMpDQoNCiAgICBkZWYgYWRkX3NjYW4oc2VsZiwgY29kZSwgbWV0YT1Ob25lKSAtPiBib29sIHwgZGljdFtzdHIsIEFueV06DQogICAgICAgICIiIg0KICAgICAgICBBZGQgc2Nhbm5lZCBjb2RlIHRvIGN1cnJlbnQgaXRlbXMuDQogICAgICAgIFJldHVybnM6IGRpY3QgaWYgYWRkZWQsIEZhbHNlIGlmIGR1cGxpY2F0ZQ0KICAgICAgICAiIiINCiAgICAgICAgZXhpc3RpbmcgPSBbaXQuZ2V0KCJiYXJjb2RlIikgZm9yIGl0IGluIHNlbGYubGlzdF9pdGVtcygpIGlmIGlzaW5zdGFuY2UoaXQsIGRpY3QpXQ0KICAgICAgICBpZiBjb2RlIGluIGV4aXN0aW5nOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgIHJlYyA9IHsiX2lkIjogc3RyKHV1aWQudXVpZDQoKSksICJiYXJjb2RlIjogY29kZSwgIm51bWJlciI6IHJhbmRvbS5yYW5kaW50KDEsIDEwMCksICJtZXRhIjogbWV0YSBvciB7fSwgImRhdGUiOiBzZWxmLl9ub3coKX0NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5kYi5pbnNlcnQoc2VsZi5DT0xMX0NVUlJFTlRfSVRFTVMsIHJlYykNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgc2VsZi5fdG9hc3QoZiJFcnJvciBhZGRpbmcgc2Nhbjoge2V9IikNCiAgICAgICAgcmV0dXJuIHJlYw0KDQogICAgZGVmIHJlbW92ZV9zY2FuKHNlbGYsIGNvZGUpOg0KICAgICAgICBpdGVtcyA9IHNlbGYubGlzdF9pdGVtcygpDQogICAgICAgIGZvciBpdCBpbiBpdGVtczoNCiAgICAgICAgICAgIGlmIGl0LmdldCgiYmFyY29kZSIpID09IGNvZGU6DQogICAgICAgICAgICAgICAgX2lkID0gaXQuZ2V0KCJfaWQiKQ0KICAgICAgICAgICAgICAgIGlmIF9pZDoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYi5kZWxldGUoc2VsZi5DT0xMX0NVUlJFTlRfSVRFTVMsIF9pZCkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdG9hc3QoZiJFcnJvciByZW1vdmluZyBzY2FuOiB7ZX0iKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICMgYmVzdC1lZmZvcnQ6IGNhbm5vdCBkZWxldGUgd2l0aG91dCBfaWQNCiAgICAgICAgICAgICAgICAgICAgcGFzcw0KDQogICAgIyAtLS0gVUkgaGVscGVycyAtLS0NCiAgICBkZWYgYnVpbGRfdGFibGVfanNvbl9mb3JfaXRlbXMoc2VsZiwgbGF5b3V0PVRBQkxFX0xBWU9VVCk6DQogICAgICAgIHJvd3MgPSBbXQ0KICAgICAgICBkYXRhID0gc2VsZi5saXN0X2l0ZW1zKCkNCiAgICAgICAgaWYgbm90IGRhdGE6DQogICAgICAgICAgICBzZWxmLl90b2FzdChmIk5vIGl0ZW1zIGZvdW5kIHtkYXRhfSIpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZm9yIGl0IGluIGRhdGE6DQogICAgICAgICAgICAgICAgcm93cy5hcHBlbmQoeyJfaWQiOiBpdC5nZXQoIl9pZCIpLCAiYmFyY29kZSI6IGl0LmdldCgiYmFyY29kZSIpLCAibnVtYmVyIjogaXQuZ2V0KCJudW1iZXIiKSwgImRhdGUiOiBpdC5nZXQoImRhdGUiKX0pDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHNlbGYuX3RvYXN0KGYiRXJyb3IgYnVpbGRpbmcgdGFibGUgSlNPTjoge2V9IikNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICB3cmFwcGVyID0gew0KICAgICAgICAgICAgImN1c3RvbXRhYmxlIjogew0KICAgICAgICAgICAgICAgICJvcHRpb25zIjogeyJzZWFyY2hfZW5hYmxlZCI6IEZhbHNlLCAic2F2ZV9wb3NpdGlvbiI6IEZhbHNlfSwNCiAgICAgICAgICAgICAgICAibGF5b3V0IjogbGF5b3V0LA0KICAgICAgICAgICAgICAgICJ0YWJsZWRhdGEiOiByb3dzDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgc2VsZi5faXNfZW1wdHkocm93cykNCiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMod3JhcHBlciwgZW5zdXJlX2FzY2lpPUZhbHNlKQ0KDQogICAgZGVmIF9pc19lbXB0eShzZWxmLCBkYXRhOiBsaXN0IHwgdHVwbGUsIG1zZzogc3RyID0gIk5vIGRvY3VtZW50cyBmb3VuZCIpIC0+IGJvb2w6DQogICAgICAgIGlmIGxlbihkYXRhKSA9PSAwOg0KICAgICAgICAgICAgc2VsZi5fdG9hc3QobXNnKQ0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBkZWYgYnVpbGRfY2FyZHNfanNvbl9mb3JfZG9jcyhzZWxmLCBkb2NzX2xpc3QsIGxheW91dD1DQVJEU19MQVlPVVQpOg0KICAgICAgICByb3dzID0gW10NCiAgICAgICAgZm9yIGQgaW4gZG9jc19saXN0Og0KICAgICAgICAgICAgcm93cy5hcHBlbmQoeyJfaWQiOiBkLmdldCgiX2lkIiksICJiYXJjb2RlIjogZC5nZXQoImJhcmNvZGUiKSwgIm51bWJlciI6IGQuZ2V0KCJudW1iZXIiKSwgImRhdGUiOiBkLmdldCgiZGF0ZSIpfSkNCiAgICAgICAgd3JhcHBlciA9IHsNCiAgICAgICAgICAgICJjdXN0b21jYXJkcyI6IHsNCiAgICAgICAgICAgICAgICAib3B0aW9ucyI6IHsic2VhcmNoX2VuYWJsZWQiOiBUcnVlfSwNCiAgICAgICAgICAgICAgICAibGF5b3V0IjogbGF5b3V0LA0KICAgICAgICAgICAgICAgICJjYXJkc2RhdGEiOiByb3dzDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgc2VsZi5faXNfZW1wdHkocm93cykNCg0KICAgICAgICByZXR1cm4ganNvbi5kdW1wcyh3cmFwcGVyLCBlbnN1cmVfYXNjaWk9RmFsc2UpDQoNCiAgICBkZWYgZmlsbF9jdXJyZW50X2RvYyhzZWxmLCBkb2M6IGRpY3Rbc3RyLCBBbnldKToNCiAgICAgICAgIiIiDQogICAgICAgIEZpbGwgdGhlIGN1cnJlbnQgZG9jdW1lbnQgaW5mb3JtYXRpb24uDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmhhc2hNYXAucHV0KFNDQU5fTk9NLCBkb2MuZ2V0KEJBUkNPREVfS0VZLCAidW5rbm93biIpKQ0KICAgICAgICBzZWxmLmhhc2hNYXAucHV0KFNDQU5fUExBTiwgZG9jLmdldChOVU1CRVJfS0VZLCAidW5rbm93biIpKQ0KICAgICAgICBzZWxmLmhhc2hNYXAucHV0KFNDQU5fRkFDVCwgZG9jLmdldChEQVRFX0tFWSwgInVua25vd24iKSkNCg0KICAgICMgLS0tIGZpbmlzaCAvIHF1ZXVlIC0tLQ0KICAgIGRlZiBmaW5pc2hfZG9jdW1lbnQoc2VsZiwgdHJ5X3NlbmQ9RmFsc2UsIGVuZHBvaW50PU5vbmUpOg0KICAgICAgICAiIiINCiAgICAgICAgTW92ZSBhY3RpdmUgZG9jICsgaXRlbXMgaW50byBwZW5kaW5nIG9yIHNlbnQgY29sbGVjdGlvbi4NCiAgICAgICAgSWYgdHJ5X3NlbmQ9VHJ1ZSBhbmQgZW5kcG9pbnQgcHJvdmlkZWQsIHdpbGwgYXR0ZW1wdCB0byBQT1NUIChyZXF1ZXN0cykuDQogICAgICAgIFJldHVybnMgZGljdDogeyJzZW50IjogYm9vbCwgImVudmVsb3BlIjogLi4ufQ0KICAgICAgICAiIiINCiAgICAgICAgZG9jID0gc2VsZi5nZXRfYWN0aXZlX2RvYygpDQogICAgICAgIGlmIG5vdCBkb2M6DQogICAgICAgICAgICBzZWxmLl90b2FzdCgiTm8gYWN0aXZlIGRvY3VtZW50IikNCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiTm8gYWN0aXZlIGRvY3VtZW50IikNCg0KICAgICAgICBpdGVtcyA9IHNlbGYubGlzdF9pdGVtcygpDQogICAgICAgIGVudmVsb3BlID0gew0KICAgICAgICAgICAgImRvYyI6IHsNCiAgICAgICAgICAgICAgICAiYmFyY29kZSI6IGRvYy5nZXQoImJhcmNvZGUiKSwNCiAgICAgICAgICAgICAgICAibWV0YSI6IGRvYy5nZXQoIm1ldGEiKSwNCiAgICAgICAgICAgICAgICAic3RhcnRlZCI6IGRvYy5nZXQoInN0YXJ0ZWQiKSwNCiAgICAgICAgICAgICAgICAiZmluaXNoZWQiOiBzZWxmLl9ub3coKSwNCiAgICAgICAgICAgICAgICAic3RhdHVzIjogInBlbmRpbmciDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgIml0ZW1zIjogaXRlbXMNCiAgICAgICAgfQ0KDQogICAgICAgIHNlbnQgPSBGYWxzZQ0KICAgICAgICBpZiB0cnlfc2VuZCBhbmQgZW5kcG9pbnQ6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaW1wb3J0IHJlcXVlc3RzICMgdHlwZTogaWdub3JlDQogICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoZW5kcG9pbnQsIGpzb249ZW52ZWxvcGUsIHRpbWVvdXQ9NykNCiAgICAgICAgICAgICAgICBpZiAyMDAgPD0gci5zdGF0dXNfY29kZSA8IDMwMDoNCiAgICAgICAgICAgICAgICAgICAgZW52ZWxvcGVbImRvYyJdWyJzdGF0dXMiXSA9ICJzZW50Ig0KICAgICAgICAgICAgICAgICAgICBzZW50ID0gVHJ1ZQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgICAgICAjIG5ldHdvcmsvc2VuZCBmYWlsdXJlIC0ga2VlcCBxdWV1ZWQNCiAgICAgICAgICAgICAgICBzZW50ID0gRmFsc2UNCg0KICAgICAgICAjIHBlcnNpc3QgaW4gYXBwcm9wcmlhdGUgY29sbGVjdGlvbg0KICAgICAgICB0YXJnZXQgPSBzZWxmLkNPTExfU0VOVCBpZiBzZW50IGVsc2Ugc2VsZi5DT0xMX1BFTkRJTkcNCiAgICAgICAgc2VsZi5kYi5pbnNlcnQodGFyZ2V0LCBlbnZlbG9wZSkNCg0KICAgICAgICAjIGNsZWFyIGFjdGl2ZSBkb2MvaXRlbXMNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VsZi5kYi5jbGVhcl9jb2xsZWN0aW9uKHNlbGYuQ09MTF9DVVJSRU5UX0RPQykNCiAgICAgICAgICAgIHNlbGYuZGIuY2xlYXJfY29sbGVjdGlvbihzZWxmLkNPTExfQ1VSUkVOVF9JVEVNUykNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgICAgIHBhc3MNCg0KICAgICAgICByZXR1cm4geyJzZW50Ijogc2VudCwgImVudmVsb3BlIjogZW52ZWxvcGV9DQoNCiAgICBkZWYgcmV0cnlfcGVuZGluZyhzZWxmLCBlbmRwb2ludD1Ob25lKToNCiAgICAgICAgIiIiDQogICAgICAgIFRyeSB0byBzZW5kIHBlbmRpbmcgZG9jcy4gTW92ZXMgc3VjY2Vzc2Z1bCB0byBzZW50IGNvbGxlY3Rpb24uDQogICAgICAgIFJldHVybnMgc3VtbWFyeSB7ImF0dGVtcHRlZCI6IG4sICJzZW50IjogbX0NCiAgICAgICAgIiIiDQogICAgICAgIHBlbmRpbmcgPSBzZWxmLmRiLmFsbChzZWxmLkNPTExfUEVORElORykNCiAgICAgICAgYXR0ZW1wdGVkID0gMA0KICAgICAgICBzZW50X2NvdW50ID0gMA0KICAgICAgICBmb3IgcmVjIGluIHBlbmRpbmc6DQogICAgICAgICAgICBhdHRlbXB0ZWQgKz0gMQ0KICAgICAgICAgICAgaWYgbm90IGVuZHBvaW50Og0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaW1wb3J0IHJlcXVlc3RzICMgdHlwZTogaWdub3JlDQogICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoZW5kcG9pbnQsIGpzb249cmVjLCB0aW1lb3V0PTcpDQogICAgICAgICAgICAgICAgaWYgMjAwIDw9IHIuc3RhdHVzX2NvZGUgPCAzMDA6DQogICAgICAgICAgICAgICAgICAgICMgbWFyayBhbmQgbW92ZQ0KICAgICAgICAgICAgICAgICAgICByZWNbImRvYyJdWyJzdGF0dXMiXSA9ICJzZW50Ig0KICAgICAgICAgICAgICAgICAgICBzZWxmLmRiLmluc2VydChzZWxmLkNPTExfU0VOVCwgcmVjKQ0KICAgICAgICAgICAgICAgICAgICBfaWQgPSByZWMuZ2V0KCJfaWQiKQ0KICAgICAgICAgICAgICAgICAgICBpZiBfaWQ6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRiLmRlbGV0ZShzZWxmLkNPTExfUEVORElORywgX2lkKQ0KICAgICAgICAgICAgICAgICAgICBzZW50X2NvdW50ICs9IDENCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgICAgICAgICAgIyBrZWVwIGluIHF1ZXVlDQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICByZXR1cm4geyJhdHRlbXB0ZWQiOiBhdHRlbXB0ZWQsICJzZW50Ijogc2VudF9jb3VudH0NCg0KICAgIGRlZiBjcmVhdGVfZGlhbG9nKHNlbGYsIHRpdGxlOiBzdHIsIGFwcHJvdmVfYnRuOiBzdHIsIGNhbmNlbF9idG46IHN0cikgLT4gTm9uZToNCiAgICAgICAgIiIi0KHQvtC30LTQsNC10YIg0LTQuNCw0LvQvtCz0L7QstC+0LUg0L7QutC90L4g0LTQu9GPINC00LDQu9GM0L3QtdC50YjQtdCz0L4g0LLQt9Cw0LjQvNC+0LTQtdC50YHRgtCy0LjRjyIiIg0KICAgICAgICBzZWxmLmhhc2hNYXAucHV0KCJTaG93RGlhbG9nIiwgIiIpDQogICAgICAgIHNlbGYuaGFzaE1hcC5wdXQoIlNob3dEaWFsb2dTdHlsZSIsIGpzb24uZHVtcHMoeyJ0aXRsZSI6IHRpdGxlLCAieWVzIjogYXBwcm92ZV9idG4sICJubyI6IGNhbmNlbF9idG59KSkNCg0KDQogICAgIyAtLS0gZGlhZ25vc3RpY3MgLS0tDQogICAgZGVmIGRlYnVnX2NvbGxlY3Rpb25zKHNlbGYpOg0KICAgICAgICAiIiJSZXR1cm4gbGlzdCBvZiBjb2xsZWN0aW9uIG5hbWVzIGFuZCBjb3VudHMgKGJlc3QtZWZmb3J0KS4iIiINCiAgICAgICAgbmFtZXMgPSBbc2VsZi5DT0xMX0NVUlJFTlRfRE9DLCBzZWxmLkNPTExfQ1VSUkVOVF9JVEVNUywgc2VsZi5DT0xMX1BFTkRJTkcsIHNlbGYuQ09MTF9TRU5UXQ0KICAgICAgICBpbmZvID0ge30NCiAgICAgICAgZm9yIG4gaW4gbmFtZXM6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaW5mb1tuXSA9IGxlbihzZWxmLmRiLmFsbChuKSkNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgICAgICAgICAgaW5mb1tuXSA9IE5vbmUNCiAgICAgICAgcmV0dXJuIGluZm8NCg0KICAgIGRlZiBfdG9hc3Qoc2VsZiwgbWVzc2FnZSk6DQogICAgICAgICIiIkhlbHBlciBtZXRob2QgdG8gc2hvdyB0b2FzdCBtZXNzYWdlcy4iIiINCiAgICAgICAgc2VsZi5oYXNoTWFwLnB1dCgidG9hc3QiLCBtZXNzYWdlKQ0KDQogICAgZGVmIF9zcGVhayhzZWxmLCB0ZXh0OiBzdHIpOg0KICAgICAgICAiIiJIZWxwZXIgbWV0aG9kIHRvIHRyaWdnZXIgc3BlZWNoIHN5bnRoZXNpcy4NCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuaGFzaE1hcC5wdXQoInNwZWFrIiwgdGV4dCkNCg0KICAgIGRlZiBfYmVlcChzZWxmLCBjb2RlOiBzdHIgPSAiIik6DQogICAgICAgICIiIkhlbHBlciBtZXRob2QgdG8gdHJpZ2dlciBiZWVwLg0KICAgICAgICBEb2M6IGBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9tZWRpYS9Ub25lR2VuZXJhdG9yI1RPTkVfU1VQX0VSUk9SYA0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5oYXNoTWFwLnB1dCgiYmVlcCIsIGNvZGUpDQoNCiAgICBkZWYgX2JlZXBfZXJyb3Ioc2VsZik6DQogICAgICAgICIiIkhlbHBlciBtZXRob2QgdG8gdHJpZ2dlciBlcnJvciBiZWVwLg0KICAgICAgICBDb2RlIDI5OiBFcnJvciBzaWduYWwNCiAgICAgICAgIiIiDQogICAgICAgIHNlbGYuX2JlZXAoIjI5IikNCg0KICAgIGRlZiBfYmVlcF9jdXN0b20oc2VsZiwgY29kZTogc3RyKToNCiAgICAgICAgIiIiSGVscGVyIG1ldGhvZCB0byB0cmlnZ2VyIGN1c3RvbSBiZWVwLg0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5oYXNoTWFwLnB1dCgiYmVlcCIsIGNvZGUpDQoNCiMgRW5kIG9mIHNjYW5faW50ZXJmYWNlLnB5DQo="
            }
        ]
    }
}